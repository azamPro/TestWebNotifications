<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Notifications Demo</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Web Notifications">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <meta name="theme-color" content="#4a6fa5">
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
        await OneSignal.init({
          appId: "25ed62bf-67ca-4720-b1dc-a4613d7de1b7",
          safari_web_id: "web.onesignal.auto.25ed62bf-67ca-4720-b1dc-a4613d7de1b7",
          notifyButton: {
            enable: true,
          },
          allowLocalhostAsSecureOrigin: true,
        });
      });
    </script>
    <!-- <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
  window.OneSignalDeferred = window.OneSignalDeferred || [];
  OneSignalDeferred.push(async function(OneSignal) {
    await OneSignal.init({
      appId: "25ed62bf-67ca-4720-b1dc-a4613d7de1b7",
    });
  });
</script> -->
</head>
<body>
    <header>
        <h1>Web Notifications Demo</h1>
    </header>

    <main>
        <section id="notification-demo">
            <h2>Safari Web Push Notifications</h2>
            <p>This demo showcases web push notifications with OneSignal, including support for iOS/iPadOS 16.4+.</p>
            
            <div class="notification-actions">
                <button id="notificationBtn" class="notification-btn">Subscribe to Notifications</button>
                <div id="notification-status" class="status-message"></div>
            </div>

            <div class="card">
                <h3>Notification Status</h3>
                <div id="permission-status">Checking permission status...</div>
            </div>

            <div class="add-to-home">
                <h3>iOS Safari Users</h3>
                <p>To receive notifications on iOS/iPadOS (16.4+), you must add this website to your home screen:</p>
                <ol>
                    <li>Tap the share icon <span class="ios-share">âŽ™</span> at the bottom of the screen</li>
                    <li>Scroll down and tap "Add to Home Screen"</li>
                    <li>Tap "Add" in the top-right corner</li>
                    <li>Open the app from your home screen</li>
                    <li>Then click "Subscribe to Notifications"</li>
                </ol>
            </div>

            <div class="card">
                <h3>How It Works</h3>
                <p>This implementation uses:</p>
                <ul>
                    <li>OneSignal SDK for notification handling</li>
                    <li>Web App Manifest for PWA capabilities</li>
                    <li>Service Worker for offline support & notifications</li>
                    <li>Special handling for iOS/iPad Safari</li>
                </ul>
            </div>
        </section>
    </main>

    <footer>
        <p>Web Notifications Demo - Powered by OneSignal</p>
    </footer>

    <script src="script.js"></script>
    <script>
        // Register service worker for Progressive Web App functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/OneSignalSDKWorker.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>
</html> 