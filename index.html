<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حفل مشاريع التخرج</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="/assets/facicon-500x500.png" type="image/png">
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="حفل المشاريع">
    <link rel="apple-touch-icon" href="/assets/icon-192x192.png">
    <meta name="theme-color" content="#0b0c15">
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
        await OneSignal.init({
          appId: "25ed62bf-67ca-4720-b1dc-a4613d7de1b7",
          safari_web_id: "web.onesignal.auto.25ed62bf-67ca-4720-b1dc-a4613d7de1b7",
          notifyButton: {
            enable: false,
          },
          allowLocalhostAsSecureOrigin: true,
        });
      });
    </script>
</head>
<body>
    <main>
        <div class="intro-header">
            <h2>مرحبا بك في حفل مشاريع التخرج</h2>
            <p>ستعيش الآن تجربة حية لمعرفة كل ما يحدث في الحفل</p>
        </div>

        <div class="notification-actions">
            <button id="notificationBtn" class="notification-btn">تفعيل الإشعارات</button>
        </div>

        <div class="card">
            <h3>حالة الإشعارات</h3>
            <div id="permission-status">جارٍ التحقق من حالة الإذن...</div>
        </div>

        <div class="add-to-home">
            <h3>يجب استخدام Safari على أجهزة iOS</h3>
            <p>لتفعيل الإشعارات على iOS قم بإضافة الموقع إلى الشاشة الرئيسية باتباع الخطوات التالية:</p>
            <ol>
                <li>اضغط على زر المشاركة <span class="ios-share">⎙</span> في أسفل الشاشة</li>
                <li>اختر "إضافة إلى الشاشة الرئيسية"</li>
                <li>اضغط "إضافة" في الزاوية العليا اليمنى</li>
                <li>افتح الموقع من الشاشة الرئيسية</li>
                <li>ثم اضغط على "تفعيل الإشعارات"</li>
            </ol>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/OneSignalSDKWorker.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>
</html>